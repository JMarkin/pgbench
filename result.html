<!DOCTYPE html>
<html>

<head>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.1.1/normalize.min.css" />
<script src="https://d3js.org/d3.v3.js" charset="utf-8"></script>

<style>
    html {
        background-color: #ffffff;
    }
    body {
        padding: 20px;
    }
    .axis path, .axis line {
        fill: none;
        stroke: #999;
        shape-rendering: crispEdges;
    }
    .axis.x2 path, .axis.x2 line {
        display: none;
    }
    .axis text, .legend text {
        font: 12px sans-serif;
        fill: #333;
    }
    .axis.x path {
        display: none;
    }

    .axis text {
        fill: #555;
    }
    .axis line, .axis path {
        stroke: #888;
    }

    .focus line {
        stroke: #900;
    }
    .focus text {
        fill: #900;
        font: 12px sans-serif;
    }
    table.results {
        width: 100%;
        border-collapse: collapse;
    }
    table.results td, table.results th {
        border: 1px solid #999;
        padding: 5px;
    }
    table.results tr.benchmark td {
        font-weight: bold;
        border-bottom: none;
        text-align: center;
    }
    table.results tr.metric td {
        border-top: none;
        border-bottom: none;
        text-align: right;
    }
    table.results tr.metric:last-child td {
        border-bottom: 1px solid #999;
    }
</style>
</head>

<body>

<p><em>Mon May 20 12:35:01 2024</em></p>

<h1>PostgreSQL Driver Performance Benchmark Report</h1>

Below are the results of testing PostgreSQL client driver implementations.
Each client is constrained to run in a single process.

Test environment: Linux 6.7.6-arch1-1 (Arch Linux rolling, x86_64) on .

<h2>Overall Results</h2>

<p>The charts below show the geometric average of all benchmark results.</p>

<svg id="mean-bars" style="width: 80vw"></svg>
<svg id="mean-lats" style="width: 80vw"></svg>

<h2>Individual Benchmarks</h2>


                    <h3>1-pg_type.json x10</h3>
                    <h4>Test Setup</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">N/A</pre>
                    <h4>Test Query</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">select typname, typnamespace, typowner, typlen, typbyval, typcategory, typispreferred, typisdefined, typdelim, typrelid, typelem, typarray from pg_type where typtypmod = $1 and typisdefined = $2</pre>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">Args: [-1, True]</pre>
                    <svg id="query-bars-0" style="width: 80vw"></svg>
                    <svg id="query-lats-0" style="width: 80vw"></svg>
                

                    <h3>2-generate_series.json x10</h3>
                    <h4>Test Setup</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">N/A</pre>
                    <h4>Test Query</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">SELECT i FROM generate_series(1, $1) AS i</pre>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">Args: [1000]</pre>
                    <svg id="query-bars-1" style="width: 80vw"></svg>
                    <svg id="query-lats-1" style="width: 80vw"></svg>
                

                    <h3>3-large_object.json x10</h3>
                    <h4>Test Setup</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">CREATE TABLE _bytes(b bytea); INSERT INTO _bytes(b) (SELECT repeat(&#x27;a&#x27;, 1000)::bytea FROM generate_series(1, 100));</pre>
                    <h4>Test Query</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">SELECT * FROM _bytes</pre>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">Args: []</pre>
                    <svg id="query-bars-2" style="width: 80vw"></svg>
                    <svg id="query-lats-2" style="width: 80vw"></svg>
                

                    <h3>6-batch.json x10</h3>
                    <h4>Test Setup</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">CREATE TABLE _test(a int, b int, c int, d text, e real, f int, g text);</pre>
                    <h4>Test Query</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">INSERT INTO _test (a, b, c, d, e, f, g) VALUES ($1, $2, $3, $4, $5, $6, $7);</pre>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">Args: [{&#x27;row&#x27;: [10, 11, 10, &#x27;TESTTESTTEST&#x27;, 10.333, 12341234, &#x27;123412341234&#x27;], &#x27;count&#x27;: 1000}]</pre>
                    <svg id="query-bars-3" style="width: 80vw"></svg>
                    <svg id="query-lats-3" style="width: 80vw"></svg>
                

                    <h3>7-oneplusone.json x10</h3>
                    <h4>Test Setup</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">N/A</pre>
                    <h4>Test Query</h4>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">SELECT 1+1</pre>
                    <pre style="white-space: pre-wrap;
                                margin-bottom: 10px;
                                margin-left: 40px;">Args: []</pre>
                    <svg id="query-bars-4" style="width: 80vw"></svg>
                    <svg id="query-lats-4" style="width: 80vw"></svg>
                


<h2>Detailed Benchmark Data</h2>


        <table class="results">
            <thead>
                <tr>
                    <th></th>
                    <th>Geometric mean</th>
<th>1-pg_type.json x10</th>
<th>2-generate_series.json x10</th>
<th>3-large_object.json x10</th>
<th>6-batch.json x10</th>
<th>7-oneplusone.json x10</th>
                </tr>
            </thead>
            <tbody>
                <tr class="benchmark">
                <td>golang-libpq</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>2027.2</td>
<td>1956.2</td>
<td>5429.51</td>
<td>4454.6</td>
<td>27.03</td>
<td>26770.23</td></tr>
<tr class="metric"><td>Rows/sec</td><td>291145.34</td>
<td>1195237.85</td>
<td>5429506.97</td>
<td>445459.63</td>
<td>27031.74</td>
<td>26770.23</td></tr>
<tr class="metric"><td>Min latency</td><td>0.782ms</td>
<td>0.67ms</td>
<td>0.35ms</td>
<td>0.28ms</td>
<td>222.97ms</td>
<td>0.02ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>4.908ms</td>
<td>5.106ms</td>
<td>1.836ms</td>
<td>2.239ms</td>
<td>368.817ms</td>
<td>0.368ms</td></tr>
<tr class="metric"><td>Max latency</td><td>21.167ms</td>
<td>17.59ms</td>
<td>8.86ms</td>
<td>10.48ms</td>
<td>467.87ms</td>
<td>5.56ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>1.555ms (31.66%)</td>
<td>1.97ms (38.58%)</td>
<td>0.802ms (43.66%)</td>
<td>1.111ms (49.61%)</td>
<td>26.572ms (7.2%)</td>
<td>0.195ms (52.85%)</td></tr>
<tr class="benchmark">
                <td>golang-pgx</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>5378.86</td>
<td>2642.9</td>
<td>7226.31</td>
<td>10701.47</td>
<td>807.91</td>
<td>27267.58</td></tr>
<tr class="metric"><td>Rows/sec</td><td>772498.78</td>
<td>1614809.05</td>
<td>7226314.05</td>
<td>1070146.88</td>
<td>807906.33</td>
<td>27267.58</td></tr>
<tr class="metric"><td>Min latency</td><td>0.217ms</td>
<td>0.41ms</td>
<td>0.18ms</td>
<td>0.1ms</td>
<td>6.46ms</td>
<td>0.01ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>1.849ms</td>
<td>3.777ms</td>
<td>1.378ms</td>
<td>0.929ms</td>
<td>12.367ms</td>
<td>0.361ms</td></tr>
<tr class="metric"><td>Max latency</td><td>17.397ms</td>
<td>16.77ms</td>
<td>6.87ms</td>
<td>5.37ms</td>
<td>764.38ms</td>
<td>3.37ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>1.281ms (69.29%)</td>
<td>1.842ms (48.76%)</td>
<td>0.742ms (53.83%)</td>
<td>0.512ms (55.14%)</td>
<td>25.673ms (207.6%)</td>
<td>0.192ms (53.17%)</td></tr>
<tr class="benchmark">
                <td>python-aiopg</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>983.02</td>
<td>365.37</td>
<td>899.13</td>
<td>2650.52</td>
<td>115.24</td>
<td>9148.08</td></tr>
<tr class="metric"><td>Rows/sec</td><td>141180.3</td>
<td>223243.07</td>
<td>899129.46</td>
<td>265052.37</td>
<td>115241.45</td>
<td>9148.08</td></tr>
<tr class="metric"><td>Min latency</td><td>3.224ms</td>
<td>4.99ms</td>
<td>2.58ms</td>
<td>2.38ms</td>
<td>66.82ms</td>
<td>0.17ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>10.161ms</td>
<td>27.355ms</td>
<td>11.117ms</td>
<td>3.77ms</td>
<td>86.678ms</td>
<td>1.09ms</td></tr>
<tr class="metric"><td>Max latency</td><td>34.391ms</td>
<td>52.92ms</td>
<td>26.69ms</td>
<td>19.63ms</td>
<td>128.34ms</td>
<td>13.52ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>1.36ms (13.39%)</td>
<td>1.396ms (5.1%)</td>
<td>1.674ms (15.06%)</td>
<td>0.583ms (15.48%)</td>
<td>9.11ms (10.51%)</td>
<td>0.375ms (34.43%)</td></tr>
<tr class="benchmark">
                <td>python-aiopg-tuples</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>2428.65</td>
<td>2605.72</td>
<td>6070.08</td>
<td>3723.12</td>
<td>123.56</td>
<td>11612.17</td></tr>
<tr class="metric"><td>Rows/sec</td><td>348798.08</td>
<td>1592094.52</td>
<td>6070083.03</td>
<td>372312.41</td>
<td>123562.32</td>
<td>11612.17</td></tr>
<tr class="metric"><td>Min latency</td><td>1.779ms</td>
<td>2.28ms</td>
<td>0.75ms</td>
<td>1.67ms</td>
<td>52.02ms</td>
<td>0.12ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>4.112ms</td>
<td>3.835ms</td>
<td>1.645ms</td>
<td>2.683ms</td>
<td>80.847ms</td>
<td>0.859ms</td></tr>
<tr class="metric"><td>Max latency</td><td>17.483ms</td>
<td>9.77ms</td>
<td>9.35ms</td>
<td>11.2ms</td>
<td>131.3ms</td>
<td>12.16ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>0.773ms (18.8%)</td>
<td>0.596ms (15.54%)</td>
<td>0.336ms (20.43%)</td>
<td>0.534ms (19.89%)</td>
<td>8.61ms (10.65%)</td>
<td>0.3ms (34.88%)</td></tr>
<tr class="benchmark">
                <td>python-asyncpg</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>5345.15</td>
<td>4406.3</td>
<td>5946.22</td>
<td>11284.19</td>
<td>742.72</td>
<td>19869.52</td></tr>
<tr class="metric"><td>Rows/sec</td><td>767657.25</td>
<td>2692247.19</td>
<td>5946223.09</td>
<td>1128418.83</td>
<td>742716.27</td>
<td>19869.52</td></tr>
<tr class="metric"><td>Min latency</td><td>0.473ms</td>
<td>0.87ms</td>
<td>0.49ms</td>
<td>0.16ms</td>
<td>6.95ms</td>
<td>0.05ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>1.869ms</td>
<td>2.268ms</td>
<td>1.68ms</td>
<td>0.885ms</td>
<td>13.456ms</td>
<td>0.502ms</td></tr>
<tr class="metric"><td>Max latency</td><td>20.122ms</td>
<td>14.69ms</td>
<td>19.29ms</td>
<td>5.67ms</td>
<td>423.38ms</td>
<td>4.85ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>1.086ms (58.11%)</td>
<td>0.948ms (41.8%)</td>
<td>1.284ms (76.44%)</td>
<td>0.352ms (39.73%)</td>
<td>15.944ms (118.49%)</td>
<td>0.221ms (44.05%)</td></tr>
<tr class="benchmark">
                <td>python-psycopg3-async</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>718.51</td>
<td>1085.14</td>
<td>1802.82</td>
<td>1783.1</td>
<td>8.32</td>
<td>6598.34</td></tr>
<tr class="metric"><td>Rows/sec</td><td>103189.61</td>
<td>663018.15</td>
<td>1802817.44</td>
<td>178309.65</td>
<td>8319.42</td>
<td>6598.34</td></tr>
<tr class="metric"><td>Min latency</td><td>6.885ms</td>
<td>5.61ms</td>
<td>1.9ms</td>
<td>4.0ms</td>
<td>1099.57ms</td>
<td>0.33ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>13.905ms</td>
<td>9.21ms</td>
<td>5.543ms</td>
<td>5.604ms</td>
<td>1201.914ms</td>
<td>1.512ms</td></tr>
<tr class="metric"><td>Max latency</td><td>34.14ms</td>
<td>25.16ms</td>
<td>19.81ms</td>
<td>13.31ms</td>
<td>1316.63ms</td>
<td>5.31ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>2.345ms (16.87%)</td>
<td>1.065ms (11.56%)</td>
<td>1.911ms (34.48%)</td>
<td>1.075ms (19.19%)</td>
<td>60.42ms (5.03%)</td>
<td>0.537ms (35.5%)</td></tr>
<tr class="benchmark">
                <td>python-psqlpy</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>634.25</td>
<td>407.84</td>
<td>2132.54</td>
<td>649.84</td>
<td>14.19</td>
<td>12797.5</td></tr>
<tr class="metric"><td>Rows/sec</td><td>91091.64</td>
<td>249191.73</td>
<td>2132542.61</td>
<td>64984.19</td>
<td>14191.5</td>
<td>12797.5</td></tr>
<tr class="metric"><td>Min latency</td><td>2.791ms</td>
<td>3.17ms</td>
<td>0.61ms</td>
<td>2.23ms</td>
<td>654.52ms</td>
<td>0.06ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>15.754ms</td>
<td>24.504ms</td>
<td>4.686ms</td>
<td>15.381ms</td>
<td>704.466ms</td>
<td>0.78ms</td></tr>
<tr class="metric"><td>Max latency</td><td>49.128ms</td>
<td>73.41ms</td>
<td>27.44ms</td>
<td>39.0ms</td>
<td>755.76ms</td>
<td>4.82ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>3.815ms (24.22%)</td>
<td>9.249ms (37.74%)</td>
<td>2.304ms (49.16%)</td>
<td>4.149ms (26.98%)</td>
<td>23.796ms (3.38%)</td>
<td>0.384ms (49.28%)</td></tr>
<tr class="benchmark">
                <td>nodejs-pg-js</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>706.11</td>
<td>920.08</td>
<td>2764.96</td>
<td>2618.66</td>
<td>2.0</td>
<td>13174.46</td></tr>
<tr class="metric"><td>Rows/sec</td><td>103407.94</td>
<td>562168.69</td>
<td>2764964.4</td>
<td>261866.38</td>
<td>2204.96</td>
<td>13174.46</td></tr>
<tr class="metric"><td>Min latency</td><td>1.282ms</td>
<td>3.08ms</td>
<td>1.5ms</td>
<td>1.44ms</td>
<td>2.74ms</td>
<td>0.19ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>3.487ms</td>
<td>10.86ms</td>
<td>3.615ms</td>
<td>3.817ms</td>
<td>4.532ms</td>
<td>0.759ms</td></tr>
<tr class="metric"><td>Max latency</td><td>20.296ms</td>
<td>47.83ms</td>
<td>16.11ms</td>
<td>19.36ms</td>
<td>19.08ms</td>
<td>12.1ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>1.107ms (31.76%)</td>
<td>3.308ms (30.45%)</td>
<td>1.204ms (33.31%)</td>
<td>1.483ms (38.86%)</td>
<td>0.805ms (17.76%)</td>
<td>0.35ms (46.16%)</td></tr>
<tr class="benchmark">
                <td>nodejs-ts-postgres</td>
                <td></td><td></td><td></td><td></td><td></td><td></td>
            </tr>
<tr class="metric"><td>Queries/sec</td><td>764.95</td>
<td>1294.74</td>
<td>2402.71</td>
<td>4823.04</td>
<td>2.0</td>
<td>8728.45</td></tr>
<tr class="metric"><td>Rows/sec</td><td>110866.22</td>
<td>791085.94</td>
<td>2402711.94</td>
<td>482303.94</td>
<td>2093.21</td>
<td>8728.45</td></tr>
<tr class="metric"><td>Min latency</td><td>0.848ms</td>
<td>1.89ms</td>
<td>1.08ms</td>
<td>0.48ms</td>
<td>2.36ms</td>
<td>0.19ms</td></tr>
<tr class="metric"><td>Mean latency</td><td>3.252ms</td>
<td>7.719ms</td>
<td>4.16ms</td>
<td>2.073ms</td>
<td>4.774ms</td>
<td>1.145ms</td></tr>
<tr class="metric"><td>Max latency</td><td>19.305ms</td>
<td>35.64ms</td>
<td>19.22ms</td>
<td>13.39ms</td>
<td>19.82ms</td>
<td>14.75ms</td></tr>
<tr class="metric"><td>Latency variation</td><td>1.136ms (34.92%)</td>
<td>2.778ms (35.99%)</td>
<td>1.515ms (36.41%)</td>
<td>0.815ms (39.33%)</td>
<td>1.101ms (23.07%)</td>
<td>0.5ms (43.69%)</td></tr>
            </tbody>
        </table>
    

<script>
var DEFAULT_COLORS = [
    "#98abc5", "#6b486b", "#ff8c00", "#8a89a6", "#7b6888", "#a05d56", "#d0743c"
];

function _humanFileSize(bytes, si) {
    var thresh = si ? 1000 : 1024;
    if(Math.abs(bytes) < thresh) {
        return bytes + ' B';
    }
    var units = si
        ? ['kB','MB','GB','TB','PB','EB','ZB','YB']
        : ['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];
    var u = -1;
    do {
        bytes /= thresh;
        ++u;
    } while(Math.abs(bytes) >= thresh && u < units.length - 1);
    return bytes.toFixed(0)+' '+units[u];
}

function _drawLegend(chart, width, sizes) {
    var legend = chart.selectAll('legend')
            .data(sizes)
            .enter()
                .append("g")
                    .attr('class', 'legend')
                    .attr("transform", "translate(" + width + ", 20)");
    legend.append('circle')
                .style('fill', function(d, i) { return DEFAULT_COLORS[i] })
                .attr('cx', 0)
                .attr('cy', function(d, i) { return i * 20 })
                .attr('r', 5);
    legend.append('text')
                .attr('x', 7)
                .attr('y', function(d, i) { return i * 20 })
                .attr('alignment-baseline', 'central')
                .text(function(d) { return d; });
}

function drawBars(elSelector, data, options) {'use strict';
options = options || {};

// geometry

var fullWidth = (options.width || 1000),
    fullHeight = (options.height || 370),
    margin = {top: 10, right: 100, bottom: 55, left: 100},
    width = fullWidth - margin.left - margin.right,
    height = fullHeight - margin.top - margin.bottom,
    benchmarks = data;

// data reshape

var maxRps = 0;
benchmarks.forEach(function(bench) {
    if (bench.data.rps > maxRps) {
        maxRps = bench.data.rps
    }
});

var names = benchmarks.map(function(d) { return d.name });

// charting

var color = d3.scale.ordinal()
            .range(DEFAULT_COLORS);

var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .2)
            .domain(names);

var y = d3.scale.linear()
            .range([height, 0])
            .domain([0, maxRps]);

var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom")
            .tickFormat(function(d) { return d.split('-')[0] });
var xAxis2 = d3.svg.axis()
            .scale(x0)
            .orient("bottom")
            .tickFormat(function(d) { return d.split('-')[1] });
var xAxis3 = d3.svg.axis()
            .scale(x0)
            .orient("bottom")
            .tickFormat(function(d) { return d.split('-')[2] });

var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");

var chart = d3.select(elSelector)
            .attr('viewBox', '0 0 ' + fullWidth + ' ' + fullHeight)
            .append("g")
                .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");

chart.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(options.showBenchmarkType ? xAxis : xAxis2);

chart.append("g")
            .attr("class", "x axis x2")
            .attr("transform", "translate(0," + (height + 14) + ")")
            .call(options.showBenchmarkType ? xAxis2 : xAxis3);

if (options.showBenchmarkType) {
    chart.append("g")
                .attr("class", "x axis x2")
                .attr("transform", "translate(0," + (height + 28) + ")")
                .call(xAxis3);
}

chart.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .text("Rows / sec");

chart.selectAll("rect")
            .data(benchmarks)
            .enter().append("rect")
                .style("fill", function(d, i) { return color(0); })
                .attr("width", x0.rangeBand())
                .attr("x", function(d, i) { return x0(d.name); })
                .attr("y", function(d) { return y(d.data.rps); })
                .attr("height", function(d) { return height - y(d.data.rps); })
                .on("mouseover", function(d, i) {
                    focusRect
                        .attr('y', y(d.data.rps) - 9);

                    focusLine
                        .attr('y1', y(d.data.rps))
                        .attr('y2', y(d.data.rps));

                    focusText
                        .attr('y', y(d.data.rps))
                        .text(d3.format("0,000")(Math.round(d.data.rps)));

                    focus.style("display", null);
                })
                .on("mouseout", function() { focus.style("display", 'none'); });

var focus = chart.append('g')
            .attr('class', 'focus')
            .style('display', 'none');
var focusRect = focus.append('rect')
            .attr('x', -margin.left)
            .attr('width', margin.left - 6)
            .attr('y', 0)
            .attr('height', 18)
            .attr('fill', 'rgba(255, 255, 255, 0.9)');
var focusLine = focus.append('line')
            .attr('x1', -6)
            .attr('x2', width - 20)
            .attr('y1', 0)
            .attr('y2', 0)
            .style("stroke-dasharray", "2,2");
var focusText = focus.append('text')
            .attr('y', 0)
            .attr('x', -9)
            .attr('text-anchor', 'end')
            .attr('alignment-baseline', 'middle');
};


function drawLats(elSelector, data) {'use strict';
options = options || {};

// geometry

var fullWidth = (options.width || 1000),
    fullHeight = (options.height || 370),
    margin = {top: 10, right: 65, bottom: 55, left: 65},
    width = fullWidth - margin.left - margin.right,
    height = fullHeight - margin.top - margin.bottom,
    benchmarks = data;

// data reshape

var maxLat = 0;
benchmarks.forEach(function(bench) {
    if (bench.data.latency_percentiles[4][1] > maxLat) {
        maxLat = bench.data.latency_percentiles[4][1];
    }
});

var names = benchmarks.map(function(d) { return d.name });

// charting

var color = d3.scale.ordinal()
            .range(DEFAULT_COLORS);

var x0 = d3.scale.ordinal()
            .rangeRoundBands([0, width], .2)
            .domain(names);

var y = d3.scale.linear()
            .range([height, 0])
            .domain([0, maxLat]);

var xAxis = d3.svg.axis()
            .scale(x0)
            .orient("bottom")
            .tickFormat(function(d) { return d.split('-')[0] });
var xAxis2 = d3.svg.axis()
            .scale(x0)
            .orient("bottom")
            .tickFormat(function(d) { return d.split('-')[1] });
var xAxis3 = d3.svg.axis()
            .scale(x0)
            .orient("bottom")
            .tickFormat(function(d) { return d.split('-')[2] });


var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");

var chart = d3.select(elSelector)
            .attr('viewBox', '0 0 ' + fullWidth + ' ' + fullHeight)
            .append("g")
                .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");

chart.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(options.showBenchmarkType ? xAxis : xAxis2);

chart.append("g")
            .attr("class", "x axis x2")
            .attr("transform", "translate(0," + (height + 14) + ")")
            .call(options.showBenchmarkType ? xAxis2 : xAxis3);

if (options.showBenchmarkType) {
    chart.append("g")
                .attr("class", "x axis x2")
                .attr("transform", "translate(0," + (height + 28) + ")")
                .call(xAxis3);
}

chart.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 6)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .text("Latency (msec)");

var g = chart.selectAll("rect")
            .data(benchmarks)
            .enter().append("g")
                .attr('class', 'sub');

g.append('line')
            .attr('y1', function(d) { return y(d.data.latency_percentiles[4][1]); })
            .attr('y2', function(d) { return y(d.data.latency_percentiles[4][1]); })
            .attr('x1', function(d, i) { return x0(d.name); })
            .attr('x2', function(d, i) { return x0(d.name) + x0.rangeBand(); })
            .style("stroke", function(d, i) { return color(0); });

g.append('line')
            .attr('y1', function(d) { return y(d.data.latency_min); })
            .attr('y2', function(d) { return y(d.data.latency_min); })
            .attr('x1', function(d, i) { return x0(d.name); })
            .attr('x2', function(d, i) { return x0(d.name) + x0.rangeBand(); })
            .style("stroke", function(d, i) { return color(0); });

g.append('line')
            .attr('y1', function(d) { return y(d.data.latency_percentiles[1][1]); })
            .attr('y2', function(d) { return y(d.data.latency_percentiles[1][1]); })
            .attr('x1', function(d, i) { return x0(d.name); })
            .attr('x2', function(d, i) { return x0(d.name) + x0.rangeBand(); })
            .style("stroke", function(d, i) { return color(0); });

g.append('line')
            .attr('y1', function(d) { return y(d.data.latency_min); })
            .attr('y2', function(d) { return y(d.data.latency_percentiles[0][1]) })
            .attr('x1', function(d, i) { return x0(d.name) + x0.rangeBand() / 2; })
            .attr('x2', function(d, i) { return x0(d.name) + x0.rangeBand() / 2; })
            .style("stroke", function(d, i) { return color(0); })
            .style("stroke-dasharray", "2,2");

g.append('line')
            .attr('y1', function(d) { return y(d.data.latency_percentiles[4][1]); })
            .attr('y2', function(d) { return y(d.data.latency_percentiles[2][1]) })
            .attr('x1', function(d, i) { return x0(d.name) + x0.rangeBand() / 2; })
            .attr('x2', function(d, i) { return x0(d.name) + x0.rangeBand() / 2; })
            .style("stroke", function(d, i) { return color(0); })
            .style("stroke-dasharray", "2,2");

g.append('rect')
            .attr('y', function(d) { return y(d.data.latency_percentiles[2][1]); })
            .attr('x', function(d, i) { return x0(d.name); })
            .attr("width", x0.rangeBand())
            .attr('height', function(d) { return Math.abs(y(d.data.latency_percentiles[2][1]) - y(d.data.latency_percentiles[0][1])) })
            .style("stroke", function(d, i) { return color(0); })
            .style("fill", 'rgba(0, 0, 0, 0)');

g.append('rect')
            .attr('y', 0)
            .attr('height', height)
            .attr('x', function(d, i) { return x0(d.name); })
            .attr('width', function(d) { return x0.rangeBand(); })
            .style('fill', 'rgba(0, 0, 0, 0)')
            .on("mouseout", function(d, i) {
                d3.select(this).style('fill', 'rgba(0, 0, 0, 0)');
                focus.style('display', 'none');
            })
            .on("mouseover", function(d, i) {
                d3.select(this).style('fill', 'rgba(0, 0, 0, 0.04)');

                var yMedian = y(d.data.latency_percentiles[1][1]);

                focus
                    .style('display', null);

                focusLine
                    .attr('y1', yMedian)
                    .attr('y2', yMedian);

                    focusRect
                        .attr('y', yMedian - 9);

                    focusLine
                        .attr('y1', yMedian)
                        .attr('y2', yMedian);

                    focusText
                        .attr('y', yMedian)
                        .text(d3.format(".2f")(d.data.latency_percentiles[1][1]));

            });

var focus = chart.append('g')
            .attr('class', 'focus')
            .style('display', 'none');
var focusRect = focus.append('rect')
            .attr('x', -margin.left)
            .attr('width', margin.left - 6)
            .attr('y', 0)
            .attr('height', 18)
            .attr('fill', 'rgba(255, 255, 255, 0.9)');
var focusLine = focus.append('line')
            .attr('x1', -6)
            .attr('x2', width - 20)
            .attr('y1', 0)
            .attr('y2', 0)
            .style("stroke-dasharray", "2,2");
var focusText = focus.append('text')
            .attr('y', 0)
            .attr('x', -9)
            .attr('text-anchor', 'end')
            .attr('alignment-baseline', 'middle');
};

var data = {"date": "%Y-%m-%dT%H:%M:%S%z", "duration": 30, "platform": {"cpu": "", "arch": "x86_64", "system": "Linux 6.7.6-arch1-1", "distribution": "Arch Linux rolling"}, "concurrency_levels": [10], "querynames": ["1-pg_type.json", "2-generate_series.json", "3-large_object.json", "6-batch.json", "7-oneplusone.json"], "queries": [{"query": "select typname, typnamespace, typowner, typlen, typbyval, typcategory, typispreferred, typisdefined, typdelim, typrelid, typelem, typarray from pg_type where typtypmod = $1 and typisdefined = $2", "args": [-1, true]}, {"query": "SELECT i FROM generate_series(1, $1) AS i", "args": [1000]}, {"setup": "CREATE TABLE _bytes(b bytea); INSERT INTO _bytes(b) (SELECT repeat('a', 1000)::bytea FROM generate_series(1, 100));", "teardown": "DROP TABLE _bytes;", "query": "SELECT * FROM _bytes", "args": []}, {"setup": "CREATE TABLE _test(a int, b int, c int, d text, e real, f int, g text);", "teardown": "DROP TABLE _test;", "query": "INSERT INTO _test (a, b, c, d, e, f, g) VALUES ($1, $2, $3, $4, $5, $6, $7);", "args": [{"row": [10, 11, 10, "TESTTESTTEST", 10.333, 12341234, "123412341234"], "count": 1000}]}, {"query": "SELECT 1+1"}], "benchmarks": [{"name": "golang-libpq", "variations": [{"duration": 30.01, "queries": 58697, "qps": 1956.2, "rps": 1195237.85, "latency_min": 0.67, "latency_mean": 5.106, "latency_max": 17.59, "latency_std": 1.97, "latency_cv": 38.58, "latency_percentiles": [[25, 3.6], [50, 4.598], [75, 6.359], [90, 7.551], [99, 11.135], [99.99, 15.333]]}, {"duration": 30.0, "queries": 162906, "qps": 5429.51, "rps": 5429506.97, "latency_min": 0.35, "latency_mean": 1.836, "latency_max": 8.86, "latency_std": 0.802, "latency_cv": 43.66, "latency_percentiles": [[25, 1.204], [50, 1.689], [75, 2.215], [90, 2.827], [99, 4.666], [99.99, 7.551]]}, {"duration": 30.0, "queries": 133656, "qps": 4454.6, "rps": 445459.63, "latency_min": 0.28, "latency_mean": 2.239, "latency_max": 10.48, "latency_std": 1.111, "latency_cv": 49.61, "latency_percentiles": [[25, 1.399], [50, 2.188], [75, 2.97], [90, 3.589], [99, 5.378], [99.99, 8.583]]}, {"duration": 30.19, "queries": 816, "qps": 27.03, "rps": 27031.74, "latency_min": 222.97, "latency_mean": 368.817, "latency_max": 467.87, "latency_std": 26.572, "latency_cv": 7.2, "latency_percentiles": [[25, 351.18], [50, 366.96], [75, 385.2], [90, 403.399], [99, 437.217], [99.99, 467.878]]}, {"duration": 30.0, "queries": 803160, "qps": 26770.23, "rps": 26770.23, "latency_min": 0.02, "latency_mean": 0.368, "latency_max": 5.56, "latency_std": 0.195, "latency_cv": 52.85, "latency_percentiles": [[25, 0.212], [50, 0.355], [75, 0.496], [90, 0.606], [99, 0.928], [99.99, 1.612]]}], "mean": {"duration": 30.04, "queries": 60898.52, "qps": 2027.2, "rps": 291145.34, "latency_min": 0.782, "latency_mean": 4.908, "latency_max": 21.167, "latency_std": 1.555, "latency_cv": 31.66, "latency_percentiles": [[25, 3.396], [50, 4.667], [75, 6.033], [90, 7.153], [99, 10.254], [99.99, 14.961]]}}, {"name": "golang-pgx", "variations": [{"duration": 30.0, "queries": 79299, "qps": 2642.9, "rps": 1614809.05, "latency_min": 0.41, "latency_mean": 3.777, "latency_max": 16.77, "latency_std": 1.842, "latency_cv": 48.76, "latency_percentiles": [[25, 2.357], [50, 3.744], [75, 5.11], [90, 6.036], [99, 8.755], [99.99, 13.561]]}, {"duration": 30.0, "queries": 216817, "qps": 7226.31, "rps": 7226314.05, "latency_min": 0.18, "latency_mean": 1.378, "latency_max": 6.87, "latency_std": 0.742, "latency_cv": 53.83, "latency_percentiles": [[25, 0.791], [50, 1.31], [75, 1.808], [90, 2.307], [99, 3.711], [99.99, 5.687]]}, {"duration": 30.0, "queries": 321079, "qps": 10701.47, "rps": 1070146.88, "latency_min": 0.1, "latency_mean": 0.929, "latency_max": 5.37, "latency_std": 0.512, "latency_cv": 55.14, "latency_percentiles": [[25, 0.534], [50, 0.878], [75, 1.211], [90, 1.583], [99, 2.489], [99.99, 4.169]]}, {"duration": 30.01, "queries": 24244, "qps": 807.91, "rps": 807906.33, "latency_min": 6.46, "latency_mean": 12.367, "latency_max": 764.38, "latency_std": 25.673, "latency_cv": 207.6, "latency_percentiles": [[25, 9.503], [50, 10.661], [75, 12.173], [90, 14.029], [99, 29.081], [99.99, 760.042]]}, {"duration": 30.0, "queries": 818086, "qps": 27267.58, "rps": 27267.58, "latency_min": 0.01, "latency_mean": 0.361, "latency_max": 3.37, "latency_std": 0.192, "latency_cv": 53.17, "latency_percentiles": [[25, 0.205], [50, 0.352], [75, 0.498], [90, 0.606], [99, 0.845], [99.99, 1.717]]}], "mean": {"duration": 30.0, "queries": 161389.49, "qps": 5378.86, "rps": 772498.78, "latency_min": 0.217, "latency_mean": 1.849, "latency_max": 17.397, "latency_std": 1.281, "latency_cv": 69.29, "latency_percentiles": [[25, 1.142], [50, 1.745], [75, 2.324], [90, 2.848], [99, 4.567], [99.99, 13.322]]}}, {"name": "python-aiopg", "variations": [{"duration": 30.02, "queries": 10970, "qps": 365.37, "rps": 223243.07, "latency_min": 4.99, "latency_mean": 27.355, "latency_max": 52.92, "latency_std": 1.396, "latency_cv": 5.1, "latency_percentiles": [[25, 26.867], [50, 27.145], [75, 27.575], [90, 28.331], [99, 33.296], [99.99, 51.518]]}, {"duration": 30.01, "queries": 26982, "qps": 899.13, "rps": 899129.46, "latency_min": 2.58, "latency_mean": 11.117, "latency_max": 26.69, "latency_std": 1.674, "latency_cv": 15.06, "latency_percentiles": [[25, 10.522], [50, 10.621], [75, 10.821], [90, 11.316], [99, 18.295], [99.99, 26.306]]}, {"duration": 30.0, "queries": 79522, "qps": 2650.52, "rps": 265052.37, "latency_min": 2.38, "latency_mean": 3.77, "latency_max": 19.63, "latency_std": 0.583, "latency_cv": 15.48, "latency_percentiles": [[25, 3.394], [50, 3.601], [75, 3.949], [90, 4.371], [99, 5.963], [99.99, 17.281]]}, {"duration": 30.05, "queries": 3463, "qps": 115.24, "rps": 115241.45, "latency_min": 66.82, "latency_mean": 86.678, "latency_max": 128.34, "latency_std": 9.11, "latency_cv": 10.51, "latency_percentiles": [[25, 78.426], [50, 86.19], [75, 93.092], [90, 97.836], [99, 112.907], [99.99, 128.343]]}, {"duration": 30.0, "queries": 274444, "qps": 9148.08, "rps": 9148.08, "latency_min": 0.17, "latency_mean": 1.09, "latency_max": 13.52, "latency_std": 0.375, "latency_cv": 34.43, "latency_percentiles": [[25, 0.783], [50, 0.967], [75, 1.304], [90, 1.614], [99, 2.057], [99.99, 11.832]]}], "mean": {"duration": 30.02, "queries": 29507.67, "qps": 983.02, "rps": 141180.3, "latency_min": 3.224, "latency_mean": 10.161, "latency_max": 34.391, "latency_std": 1.36, "latency_cv": 13.39, "latency_percentiles": [[25, 8.996], [50, 9.715], [75, 10.742], [90, 11.722], [99, 15.319], [99.99, 32.374]]}}, {"name": "python-aiopg-tuples", "variations": [{"duration": 30.0, "queries": 78177, "qps": 2605.72, "rps": 1592094.52, "latency_min": 2.28, "latency_mean": 3.835, "latency_max": 9.77, "latency_std": 0.596, "latency_cv": 15.54, "latency_percentiles": [[25, 3.498], [50, 3.59], [75, 3.955], [90, 4.59], [99, 5.934], [99.99, 9.258]]}, {"duration": 30.0, "queries": 182112, "qps": 6070.08, "rps": 6070083.03, "latency_min": 0.75, "latency_mean": 1.645, "latency_max": 9.35, "latency_std": 0.336, "latency_cv": 20.43, "latency_percentiles": [[25, 1.431], [50, 1.536], [75, 1.755], [90, 2.083], [99, 2.868], [99.99, 4.805]]}, {"duration": 30.0, "queries": 111699, "qps": 3723.12, "rps": 372312.41, "latency_min": 1.67, "latency_mean": 2.683, "latency_max": 11.2, "latency_std": 0.534, "latency_cv": 19.89, "latency_percentiles": [[25, 2.355], [50, 2.486], [75, 2.79], [90, 3.472], [99, 4.638], [99.99, 10.948]]}, {"duration": 30.05, "queries": 3713, "qps": 123.56, "rps": 123562.32, "latency_min": 52.02, "latency_mean": 80.847, "latency_max": 131.3, "latency_std": 8.61, "latency_cv": 10.65, "latency_percentiles": [[25, 74.436], [50, 77.397], [75, 86.906], [90, 92.095], [99, 107.397], [99.99, 131.303]]}, {"duration": 30.0, "queries": 348366, "qps": 11612.17, "rps": 11612.17, "latency_min": 0.12, "latency_mean": 0.859, "latency_max": 12.16, "latency_std": 0.3, "latency_cv": 34.88, "latency_percentiles": [[25, 0.641], [50, 0.752], [75, 1.0], [90, 1.295], [99, 1.747], [99.99, 8.853]]}], "mean": {"duration": 30.01, "queries": 72886.23, "qps": 2428.65, "rps": 348798.08, "latency_min": 1.779, "latency_mean": 4.112, "latency_max": 17.483, "latency_std": 0.773, "latency_cv": 18.8, "latency_percentiles": [[25, 3.548], [50, 3.805], [75, 4.418], [90, 5.242], [99, 6.825], [99.99, 14.144]]}}, {"name": "python-asyncpg", "variations": [{"duration": 30.0, "queries": 132196, "qps": 4406.3, "rps": 2692247.19, "latency_min": 0.87, "latency_mean": 2.268, "latency_max": 14.69, "latency_std": 0.948, "latency_cv": 41.8, "latency_percentiles": [[25, 1.904], [50, 1.999], [75, 2.373], [90, 2.747], [99, 8.294], [99.99, 12.916]]}, {"duration": 30.0, "queries": 178390, "qps": 5946.22, "rps": 5946223.09, "latency_min": 0.49, "latency_mean": 1.68, "latency_max": 19.29, "latency_std": 1.284, "latency_cv": 76.44, "latency_percentiles": [[25, 1.186], [50, 1.282], [75, 1.55], [90, 2.113], [99, 7.884], [99.99, 15.637]]}, {"duration": 30.0, "queries": 338529, "qps": 11284.19, "rps": 1128418.83, "latency_min": 0.16, "latency_mean": 0.885, "latency_max": 5.67, "latency_std": 0.352, "latency_cv": 39.73, "latency_percentiles": [[25, 0.632], [50, 0.816], [75, 1.06], [90, 1.313], [99, 2.154], [99.99, 3.763]]}, {"duration": 30.01, "queries": 22287, "qps": 742.72, "rps": 742716.27, "latency_min": 6.95, "latency_mean": 13.456, "latency_max": 423.38, "latency_std": 15.944, "latency_cv": 118.49, "latency_percentiles": [[25, 10.518], [50, 11.866], [75, 14.043], [90, 16.252], [99, 35.843], [99.99, 422.545]]}, {"duration": 30.0, "queries": 596092, "qps": 19869.52, "rps": 19869.52, "latency_min": 0.05, "latency_mean": 0.502, "latency_max": 4.85, "latency_std": 0.221, "latency_cv": 44.05, "latency_percentiles": [[25, 0.328], [50, 0.429], [75, 0.627], [90, 0.778], [99, 1.318], [99.99, 1.935]]}], "mean": {"duration": 30.0, "queries": 160365.12, "qps": 5345.15, "rps": 767657.25, "latency_min": 0.473, "latency_mean": 1.869, "latency_max": 20.122, "latency_std": 1.086, "latency_cv": 58.11, "latency_percentiles": [[25, 1.375], [50, 1.605], [75, 2.028], [90, 2.493], [99, 5.816], [99.99, 14.41]]}}, {"name": "python-psycopg3-async", "variations": [{"duration": 30.01, "queries": 32563, "qps": 1085.14, "rps": 663018.15, "latency_min": 5.61, "latency_mean": 9.21, "latency_max": 25.16, "latency_std": 1.065, "latency_cv": 11.56, "latency_percentiles": [[25, 8.798], [50, 8.986], [75, 9.627], [90, 10.257], [99, 13.846], [99.99, 24.335]]}, {"duration": 30.0, "queries": 54092, "qps": 1802.82, "rps": 1802817.44, "latency_min": 1.9, "latency_mean": 5.543, "latency_max": 19.81, "latency_std": 1.911, "latency_cv": 34.48, "latency_percentiles": [[25, 4.696], [50, 4.745], [75, 4.898], [90, 9.346], [99, 12.46], [99.99, 18.352]]}, {"duration": 30.0, "queries": 53501, "qps": 1783.1, "rps": 178309.65, "latency_min": 4.0, "latency_mean": 5.604, "latency_max": 13.31, "latency_std": 1.075, "latency_cv": 19.19, "latency_percentiles": [[25, 4.879], [50, 5.188], [75, 5.915], [90, 7.39], [99, 8.968], [99.99, 12.926]]}, {"duration": 30.05, "queries": 250, "qps": 8.32, "rps": 8319.42, "latency_min": 1099.57, "latency_mean": 1201.914, "latency_max": 1316.63, "latency_std": 60.42, "latency_cv": 5.03, "latency_percentiles": [[25, 1148.44], [50, 1207.37], [75, 1247.837], [90, 1285.36], [99, 1315.83], [99.99, 1316.64]]}, {"duration": 30.0, "queries": 197952, "qps": 6598.34, "rps": 6598.34, "latency_min": 0.33, "latency_mean": 1.512, "latency_max": 5.31, "latency_std": 0.537, "latency_cv": 35.5, "latency_percentiles": [[25, 1.041], [50, 1.466], [75, 1.769], [90, 2.251], [99, 3.255], [99.99, 4.686]]}], "mean": {"duration": 30.01, "queries": 21564.72, "qps": 718.51, "rps": 103189.61, "latency_min": 6.885, "latency_mean": 13.905, "latency_max": 34.14, "latency_std": 2.345, "latency_cv": 16.87, "latency_percentiles": [[25, 11.923], [50, 13.139], [75, 14.384], [90, 18.295], [99, 23.134], [99.99, 32.384]]}}, {"name": "python-psqlpy", "variations": [{"duration": 30.01, "queries": 12240, "qps": 407.84, "rps": 249191.73, "latency_min": 3.17, "latency_mean": 24.504, "latency_max": 73.41, "latency_std": 9.249, "latency_cv": 37.74, "latency_percentiles": [[25, 17.93], [50, 22.627], [75, 29.223], [90, 37.423], [99, 52.821], [99.99, 72.616]]}, {"duration": 30.0, "queries": 63982, "qps": 2132.54, "rps": 2132542.61, "latency_min": 0.61, "latency_mean": 4.686, "latency_max": 27.44, "latency_std": 2.304, "latency_cv": 49.16, "latency_percentiles": [[25, 2.98], [50, 4.368], [75, 5.775], [90, 7.573], [99, 12.351], [99.99, 21.432]]}, {"duration": 30.01, "queries": 19500, "qps": 649.84, "rps": 64984.19, "latency_min": 2.23, "latency_mean": 15.381, "latency_max": 39.0, "latency_std": 4.149, "latency_cv": 26.98, "latency_percentiles": [[25, 12.13], [50, 14.909], [75, 18.148], [90, 20.971], [99, 26.33], [99.99, 35.091]]}, {"duration": 30.3, "queries": 430, "qps": 14.19, "rps": 14191.5, "latency_min": 654.52, "latency_mean": 704.466, "latency_max": 755.76, "latency_std": 23.796, "latency_cv": 3.38, "latency_percentiles": [[25, 687.46], [50, 704.73], [75, 723.46], [90, 735.54], [99, 751.904], [99.99, 755.769]]}, {"duration": 30.0, "queries": 383932, "qps": 12797.5, "rps": 12797.5, "latency_min": 0.06, "latency_mean": 0.78, "latency_max": 4.82, "latency_std": 0.384, "latency_cv": 49.28, "latency_percentiles": [[25, 0.456], [50, 0.769], [75, 1.0], [90, 1.235], [99, 1.977], [99.99, 3.432]]}], "mean": {"duration": 30.06, "queries": 19068.62, "qps": 634.25, "rps": 91091.64, "latency_min": 2.791, "latency_mean": 15.754, "latency_max": 49.128, "latency_std": 3.815, "latency_cv": 24.22, "latency_percentiles": [[25, 11.523], [50, 15.152], [75, 18.582], [90, 22.205], [99, 30.299], [99.99, 42.682]]}}, {"name": "nodejs-pg-js", "variations": [{"duration": 30.02, "queries": 27619, "qps": 920.08, "rps": 562168.69, "latency_min": 3.08, "latency_mean": 10.86, "latency_max": 47.83, "latency_std": 3.308, "latency_cv": 30.45, "latency_percentiles": [[25, 9.159], [50, 9.617], [75, 10.32], [90, 18.199], [99, 21.513], [99.99, 36.455]]}, {"duration": 30.01, "queries": 82981, "qps": 2764.96, "rps": 2764964.4, "latency_min": 1.5, "latency_mean": 3.615, "latency_max": 16.11, "latency_std": 1.204, "latency_cv": 33.31, "latency_percentiles": [[25, 2.833], [50, 3.156], [75, 3.776], [90, 5.54], [99, 8.322], [99.99, 13.724]]}, {"duration": 30.02, "queries": 78604, "qps": 2618.66, "rps": 261866.38, "latency_min": 1.44, "latency_mean": 3.817, "latency_max": 19.36, "latency_std": 1.483, "latency_cv": 38.86, "latency_percentiles": [[25, 2.769], [50, 3.154], [75, 4.297], [90, 5.862], [99, 9.182], [99.99, 14.783]]}, {"duration": 30.02, "queries": 60, "qps": 2.0, "rps": 2204.96, "latency_min": 2.74, "latency_mean": 4.532, "latency_max": 19.08, "latency_std": 0.805, "latency_cv": 17.76, "latency_percentiles": [[25, 4.205], [50, 4.428], [75, 4.655], [90, 4.886], [99, 7.817], [99.99, 18.488]]}, {"duration": 30.01, "queries": 395395, "qps": 13174.46, "rps": 13174.46, "latency_min": 0.19, "latency_mean": 0.759, "latency_max": 12.1, "latency_std": 0.35, "latency_cv": 46.16, "latency_percentiles": [[25, 0.498], [50, 0.637], [75, 0.935], [90, 1.159], [99, 2.108], [99.99, 3.575]]}], "mean": {"duration": 30.02, "queries": 21191.55, "qps": 706.11, "rps": 103407.94, "latency_min": 1.282, "latency_mean": 3.487, "latency_max": 20.296, "latency_std": 1.107, "latency_cv": 31.76, "latency_percentiles": [[25, 2.726], [50, 3.064], [75, 3.737], [90, 5.069], [99, 7.701], [99.99, 13.735]]}}, {"name": "nodejs-ts-postgres", "variations": [{"duration": 30.01, "queries": 38859, "qps": 1294.74, "rps": 791085.94, "latency_min": 1.89, "latency_mean": 7.719, "latency_max": 35.64, "latency_std": 2.778, "latency_cv": 35.99, "latency_percentiles": [[25, 5.825], [50, 6.848], [75, 9.042], [90, 11.511], [99, 17.419], [99.99, 28.861]]}, {"duration": 30.01, "queries": 72112, "qps": 2402.71, "rps": 2402711.94, "latency_min": 1.08, "latency_mean": 4.16, "latency_max": 19.22, "latency_std": 1.515, "latency_cv": 36.41, "latency_percentiles": [[25, 3.126], [50, 3.723], [75, 4.871], [90, 6.14], [99, 9.423], [99.99, 16.456]]}, {"duration": 30.01, "queries": 144749, "qps": 4823.04, "rps": 482303.94, "latency_min": 0.48, "latency_mean": 2.073, "latency_max": 13.39, "latency_std": 0.815, "latency_cv": 39.33, "latency_percentiles": [[25, 1.507], [50, 1.757], [75, 2.31], [90, 3.124], [99, 5.066], [99.99, 8.641]]}, {"duration": 30.02, "queries": 60, "qps": 2.0, "rps": 2093.21, "latency_min": 2.36, "latency_mean": 4.774, "latency_max": 19.82, "latency_std": 1.101, "latency_cv": 23.07, "latency_percentiles": [[25, 4.098], [50, 4.554], [75, 5.233], [90, 6.078], [99, 8.185], [99.99, 19.054]]}, {"duration": 30.02, "queries": 261985, "qps": 8728.45, "rps": 8728.45, "latency_min": 0.19, "latency_mean": 1.145, "latency_max": 14.75, "latency_std": 0.5, "latency_cv": 43.69, "latency_percentiles": [[25, 0.765], [50, 0.993], [75, 1.385], [90, 1.715], [99, 3.097], [99.99, 4.882]]}], "mean": {"duration": 30.01, "queries": 22956.65, "qps": 764.95, "rps": 110866.22, "latency_min": 0.848, "latency_mean": 3.252, "latency_max": 19.305, "latency_std": 1.136, "latency_cv": 34.92, "latency_percentiles": [[25, 2.437], [50, 2.893], [75, 3.746], [90, 4.703], [99, 7.324], [99.99, 13.072]]}}]};

var options = {
    width: 800,
    height: 300,
    showBenchmarkType: true
}

var meanData = [];
var order = {};
for (var i = 0; i < data.benchmarks.length; i += 1) {
    var benchmark = data.benchmarks[i];
    meanData.push({
        'name': benchmark['name'],
        'data': benchmark['mean']
    });
}

meanData.sort(function(e1, e2) {
    return d3.ascending(e1.data.rps, e2.data.rps);
})

for (var i = 0; i < meanData.length; i += 1) {
    order[meanData[i].name] = i;
}

drawBars('#mean-bars', meanData, options);
drawLats('#mean-lats', meanData, options);

var queriesSection = document.getElementById("queries");
var nqueries = data.querynames.length;

for (var i = 0; i < data.concurrency_levels.length; i += 1) {
    for (var j = 0; j < data.querynames.length; j += 1) {
        var queryData = [];
        var offset = i * nqueries + j;
        for (var k = 0; k < data.benchmarks.length; k += 1) {
            var benchmark = data.benchmarks[k];
            queryData.push({
                'name': benchmark['name'],
                'data': benchmark['variations'][offset]
            });
        }

        queryData.sort(function(e1, e2) {
            return d3.ascending(order[e1.name], order[e2.name]);
        });

        drawBars('#query-bars-' + offset, queryData, options);
        drawLats('#query-lats-' + offset, queryData, options);
    }
}
</script>

</body>

</html>
